- 렌더 파이프라인

렌더 파이프라인은 씬의 내용들을 취하여
컬링(culling), 렌더링(rendering), 포스트프로세싱(post-processing)등의
작업을 수행하고 그것을 스크린에 표시하는 역할을한다.
유니티는 몇가지 서로 다른 렌더 파이프라인을 제공한다(built-in, SRP, URP, HDRP)

⨀ 데이터 처리과정
Application -> Geometry -> Rasterizer

ο Application
애플리케이션 스테이지는 애플리케이션 상에서 처리되는 단계를 의미한다.
그래픽스 렌더링 파이프라인은 보통 GPU파이프라인을 의미하므로
CPU에서 연산되는 애플리케이션 스테이지는 포함되지 않지만
본격적인 렌더링 파이프라인 진입 전 CPU에서 필요한 연산들을
처리해야하므로 큰 의미로는 렌더링 파이프라인의 일부분이 된다.
ex) 플레이어의 매 프레임마다 위치, 애니메이션 정보와 연산 및 mesh의 vertex에 반영 등
현재 프레임에서 렌더링 가능한 오브젝트들이 컬링 연산에 의해 구별된다.
이 컬링 단계에서 효율적으로 오브젝트들이 선별되어 렌더링 되는
오브젝트 수를 줄이면 그만큼 GPU에서 처리하는 연산량이 줄게 된다.
또한 배칭 처리를 위한 연산도 GPU 파이프라인에 진입 전에 이루어진다.

ο Geometry
이 스테이지에서는 말 그대로 지오메트리 관련 정보,즉 지오메트리를
구성하는 요소인 버텍스와 폴리곤 처리를 담당하며 아래와 같은 과정들을 거친다.
1.World-View 프로젝션 트랜스폼
2.클리핑
3.버텍스 쉐이더
*버텍스 트랜스폼 : 렌더링을 수행해야 되는 시점에 GPU가 메모리로부터 버텍스 정보를
                 가져와 적절한 위치에 그려주기 위해서 수행하는 트랜스폼이다.
                 
ο Rasterizer
이 스테이지에서는 오브젝트를 그리는 픽셀들을 추리고 그 픽셀의 색을 결정한다.
버텍스 쉐이더를 거쳐서 지오메트리들이 구축되면, 화면(혹은 버퍼)의 어느 픽셀에 그려야하는지 결정된다.
메시의 폴리곤에 속한 영억을 픽셀로 매칭시키는 과정을 레스터라이제이션이라고 부른다.
레스터라이제이션이 끝나면 최종적으로 화면에 그려져야 할 픽셀의 최종 색이 결정된다
즉, 해당 스테이지에서는 렌더링하는  메시가 화면에 매칭되는 픽셀을 결정하고 최종 색을 입히는 과정이다.
뎁스 버퍼, Z-버퍼르 ㄹ이용해 깊이 판정을 하고 블렌딩을 통해 최종 출력 색상을 결정한다.
*블렌딩 : 투명도를 가지는 오브젝트는 픽셀 렌더링 시 알파 블렌딩 과정을 거친다.
         알파 블렌딩은 쉐이더에서 결정되는 알파값을 이용한다. 픽셀 출력의 알파값을 이용해서
         해당 픽셀 위치의 컬러 버퍼의 기존값과 적절하게 혼합해 최종 출력 색상을 결정한다.


⨀ built-in render pipeline(빌트인 렌더 파이프라인)
유니티에 기본으로 설정되어있는 디폴트(default) 렌더 파이프라인이다.
일반적인 목적의 렌더 파이프라인으로 커스텀 확장에 관해서 스크립터블 렌더 파이프라인(SRP)에 비해 제한적이다. 
포워드 렌더링 패스(forward rendering path)와 디퍼드 렌더링 패스(defered rendering path)중
한가지를 선택할수있으며 커맨드 버퍼와 콜백으로 기능을 확장할수있다.

⨀ SRP(scriptable render pipeline)
스크립터블 렌더링 파이프라인(SRP)을 사용하면 스크립트로 렌더링을 제어하고 커스터마이징할수있다. 
개발자는 유니티가 프레임을 렌더링하는 방법을 c# 스크립트로 작성하여 프로젝트의 요구사항을 충족하기위해
기존의 파이프 라인을 수정하거나 재구성할수있다. 유니티는 2개의 빌트인 SRP를 제공한다(URP, HDRP)

⨀ URP(universal render pipeline)
URP는 뛰어난 성능 및 향상된 그래픽 품질을 제공하는 SRP로 기본 빌트인 렌더 파이프라인보다 
유연하고 확장성이 좋으며 다양한 플래폼(모바일, 콘솔, PC, VR)에 최적화된 그래픽을 제공한다.
싱글 패스 포워드 렌더링, 셰이더 그래프, VFX 그래프를 지원한다(디퍼드 렌더러 지원 예정)

⨀ HDRP(high definition render pipeline)
고해상도 렌더 파이프라인은 유니티에 내장된 SRP로 물리 기반의 렌더링과 우수한 GPU 성능으로
정확하고 매우 사실적인 그래픽을 제공한다. 
고사양 그래픽이 요구되는 프로젝트를 위해 HDRP를 사용할수있다.
컴퓨트쉐이더(compute shader) 기술과 GPU 하드웨어를 사용하며 포워드 렌더링, 디퍼드 렌더링을 모두 지원한다.
